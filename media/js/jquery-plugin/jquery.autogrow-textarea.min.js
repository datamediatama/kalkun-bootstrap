(function(a){a.fn.autogrow=function(b){this.filter("textarea").each(function(){var e=a(this),d=e.height(),c=e.css("lineHeight");var g=a("<div></div>").css({position:"absolute",top:-10000,left:-10000,width:a(this).css('width'),fontSize:e.css("fontSize"),fontFamily:e.css("fontFamily"),lineHeight:e.css("lineHeight"),resize:"none"}).appendTo(document.body);var f=function(){var h=this.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n/g,"<br/>");g.html(h);a(this).css("height",Math.max(g.height()+20,d))};a(this).change(f).keyup(f).keydown(f);f.apply(this)});return this}})(jQuery);